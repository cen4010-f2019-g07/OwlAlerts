<!DOCTYPE html>
<html>
	<head>
		<% include ../../partials/head %>
	</head>
	<body style="background-color:#BDBDBD">
		<header> 
			<div>
					<% include ../../partials/header %>
			</div>
        </header>
        <% include ../../partials/sidebar %>
        <div id="main">
        <div class="container">
            <div class="mt-4 text-center">
                <br>
                <% if(message.error) { %>
                    <div class="alert alert-error text-center rounded mx-sm-5" role="alert">
                        <% for(var i in message.error) { %>
                            <%= message.error[i] %>
                        <% } %>
                    </div>
                <% } %>
                <% if(message.success) { %>
                    <div class="alert alert-success text-center rounded mx-sm-5" role="alert">
                        <% for(var i in message.success) { %>
                            <%= message.success[i] %>
                        <% } %>
                    </div>
                <% } %>
            </div>
            <div class="mt-4 display-3 text-center">
                Post an Issue
            </div>
            <h4 class="text-center mt-2 ">
                Please enter the correct issue information below!
            </h4>
            <br>
            <div class="image-wrapper">
                    <img class="rounded-circle" id="userImageUpload" src=<%= imgFilePath %> width='180' height='180'/>
            </div>
            <div class="rounded mx-sm-4" style="background-color:white">
                <br>
                <form action="/issues/create" method="post" enctype="multipart/form-data" ref="uploadForm" id='issue-create'>
                    <div class="form-group mx-sm-5">
                        <label for="issueTitle">Issue Title</label>
                        <input type="text" class="form-control" id="issueTitle" placeholder="Title" name="title">
                    </div>
                    <div class="form-group mx-sm-5">
                            <label for="issueDescript">Description</label>
                            <input type="text" class="form-control" id="issueDescript" placeholder="Description" name="description">
                    </div>
                    <div class="form-group mx-sm-5">
                            <label for="issueLocation">Location</label>
                            <input type="text" class="form-control" id="issueLocation" placeholder="Location" name="location">
                    </div>
                    <div class="form-group mx-sm-5">
                            <label for="image">Issue Image</label>                            
                            <input type="file" class="form-control" id="profileImg" accept="" name="profile" onchange="onImageUpload(this);">                                                      
                    </div>
                    <div class="text-center pb-2">
                        <button type="submit" class="btn btn-dark">Report</button>
                    </div>                    
                </form>
                
                
            </div>
            
        </div>
        </div>

        <script>

                function onImageUpload(input)        
                {
                    if (input.files && input.files[0]) {
                        var reader = new FileReader();
    
                        reader.onload = function (e) {
                            $('#userImageUpload')
                                .attr('src', e.target.result)
                                .width(180)
                                .height(180);
                        };
    
                        reader.readAsDataURL(input.files[0]);                                      
                    }
                }
    
            </script>
    </body>
</html>